name: "Publish"
on:
  push:
    # Sequence of patterns matched against refs/tags
    tags:
      - "v*"

jobs:
  publish:
    uses: ./.github/workflows/publish_template.yml
  # Publish alloy if the tag ends with "-alloy"
  publish-alloy:
    if: endsWith(github.ref, '-alloy')
    uses: ./.github/workflows/publish_template.yml
    with:
      alloy: true
